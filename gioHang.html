 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán</title>
    <link rel="stylesheet" href="css/cart.css">
    <link rel="stylesheet" href="css/gioHang.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="fonts/fontawesome-free-5.13.0-web/css/all.min.css">
    <script src="js/until.js"></script>
    <script src="js/sanPham.js"></script>
    <script src="js/gioHang.js"></script> 
    <script src="js/formValidation.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <style>
        .error{
            font-size: 12px;
            color: #f7452e;
            line-height: 14px;
            height: 14px;
            margin-left: 10px;
            font-style:  italic; 
        }
        .thanhtoanbtn{
            width: 450px;
            height: 50px;
            margin: auto;
            margin-left: 635px;
            line-height: 18px;
            border-radius: 5px;
            border: 1px solid #ddd;
            box-shadow: 4px 2px 2px #ddd;
            background-color: #f7452e;
            opacity: 0.8;
            margin-top: -80px;
            font-size: 16px;
            cursor: pointer;
        }
        .thanhtoanbtn:hover{
            opacity: 1;
        }
    </style>
</head>
<body>
    <header id="header">
        <div id="noidung-header">
            <nav class="navbartren">
                <ul class="noidung-navbar-tren-trai">
                    <li class="nd1 hiennd phancachchedoc">
                        <a href="#">Tải ứng dụng</a>
                        <div class="qrcode">
                            <img src="images/f184c0b68a2d385feb5d70a76396230b.png" alt="QR Code" class="qrcode_qr">
                            <div class="qrcode_ap">
                                <a href="#" class="qrcode_ap_link"><img src="images/2679f513b5f9e235adf2c6c288617e7b.png" alt="Google Play"></a>
                                <a href="#" class="qrcode_ap_link"><img src="images/759416b55e2bd69ecc360ee2faab7ad0.png" alt="App Store"></a>
                            </div>
                        </div>
                    </li>
                    <li class="nd1">
                        <a href="#">Kết nối</a>
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </li>
                </ul>
                <ul class="noidung-navbar-tren-trai">
                    <li class="nd1 hiennd">
                        <a href="#"><i class="fas fa-bell"></i>Thông báo</a>
                        <div class="thongbao">
                            <img class="thongbao-hinhanh" src="images/5a83ec8ec1bc1ea687fdf9c6e68eee0b.png" alt="">
                            <div class="nhacnho">Đăng nhập để xem thông báo</div>
                            <div class="dangki">
                                <a onclick="nodeDangKy()">Đăng ký</a>
                            </div>
                            <div class="dangnhap">
                                <a onclick="nodeDangNhap()">Đăng nhập</a>
                            </div>
                        </div>
                    </li>                    
                    <li class="nd1">
                        <a href="#"><i class="far fa-question-circle"></i>Trợ giúp</a>
                    </li>
                    <li class="nd1 phancachchedoc"><a onclick="nodeDangKy()">Đăng ký</a></li>
                    <li class="nd1"><a onclick="nodeDangNhap()">Đăng nhập</a></li>
                </ul>
            </nav>
            <div class="header-logo">
                <a href="index.html"><img src="images/image.png" alt=""></a>
            </div>  
            <div class="header-giua">
                <div class="menu">
                    <nav id="nav-bar">
                        <ul class="menu-lv1">
                            <li class="item-lv1">
                                <a href="index.html" class="item-lv1-title">TRANG CHỦ</a>
                            </li>
                            <li class="item-lv1">
                                <a href="#" class="item-lv1-title">SẢN PHẨM</a>
                                <ul class="menu-lv2">
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">NOKIA</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">SAMSUNG</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">APPLE</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">HUAWEI</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">LG</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">SONY</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="item-lv1">
                                <a href="#" class="item-lv1-title">PHỤ KIỆN</a>
                                <ul class="menu-lv2">
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">Điện thoại</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">Đồ gia dụng</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="item-lv1">
                                <a href="index.html" class="item-lv1-title">TUYỂN DỤNG</a>
                            </li>
                            <li class="item-lv1">
                                <a href="#" class="item-lv1-title">KHUYỄN MÃI</a>
                                <ul class="menu-lv2">
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">NOKIA</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">SAMSUNG</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">APPLE</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">HUAWEI</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">LG</a>
                                    </li>
                                    <li class="item-lv2">
                                        <a href="#" class="item-lv2-title">SONY</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                
                <div class="timkiem">                   
                    <input notnull oninput="Onvaluechange()" type="text" name="Tìm kiếm" id="noidung-timkiem" class="noidung-timkiem" placeholder="Tìm kiếm trong Shop">
                    <!--thông báo lỗi-->
                    <label id="thongbaoLoi" for="noidung-timkiem" class="error2"></label>
                    <div class="timkiem_lichsu">
                        <h3 class="timkiem_lichsu_head">Lịch sử Tìm kiếm</h3>
                        <ul class="timkiem_lichsu_list">
                            <li class="timkiem_lichsu__danhsach">
                                <a href="#">Điện thoại SamSung giá rẻ</a>
                            </li>
                            <li class="timkiem_lichsu__danhsach">
                                <a href="#">Điện thoại giá rẻ</a>
                            </li>
                            <li class="timkiem_lichsu__danhsach">
                                <a href="#">Điện thoại Iphone</a>
                            </li>
                            <li class="timkiem_lichsu__danhsach">
                                <a href="#">Thầy Hiếu đẹp trai nhất FPT Tây Nguyên</a>
                            </li>
                        </ul>
                    </div>
                    <select id="timkiemchon" class="btntimkiemchon">
                        <option class="in1" value="trong">Trong Shop</option>
                        <option class="in1" value="ngoai">Ngoài Shop</option>            
                    </select>
                    <button onclick="onclickTimKiem()" class="btn-timkiem">
                        <i class="btn-timkiemlg fas fa-search"></i>
                    </button>
                </div>   
            </div>  
            <div class="header-muahang">
                <a href="gioHang.html"><i class="fas fa-cart-arrow-down"></i></a>
            </div> 
        </div>  
    </header>
    
    <main id="main-giohang">
        <h2 class="cart-title">
            GIỎ HÀNG CỦA BẠN
        </h2>
        <div class="thanhngang"></div>
        <div class="menugiohang">
            <div class="hinh">Hình ảnh sản phẩm</div>
            <div class="tenspp">Tên sản phẩm</div>
            <div class="giaspp">Giá</div>
            <div class="soluongspp">Số lượng</div>
            <div class="thanhtien">Tổng tiền</div>
            <div class="thaotacxoa"></div>            
        </div>
        <div class="gioHang" id="gioHang">
            <!--HIỂN THỊ SẢN PHẨM-->
            
        </div>
        <div class="thanhToan">
            <div class="tamTinh">
                <p class="nd1_tt">Tạm tính:</p>
                <div class="tamthanhtoan" id="thanhTien">

                </div>
            </div>
            <div class="tienPhaiTra">
                <p class="nd1_tt">Thành tiền:</p>
                <div class="thanhtoanEnd" id="thanhTien">

                </div>
            </div>
            <div class="vat">
                <p class="vat_tt">(Đã bao gồm VAT)</p>
            </div>
        </div>
        <div class="thanhngang"></div> 
        <div class="khungchuamua">
            <div class="customer-info">            
                <h2 class="cart-title">THÔNG TIN KHÁCH HÀNG</h2>
                <label for="hoten">Họ tên người nhận</label>
                <input notnull oninput="Onvaluechange()" type="text" name="Họ tên" id="hoten">
                <!--thông báo lỗi-->
                <label id="thongbaoLoi" for="hoten" class="error"></label>
    
                <label for="phonenumber">Số điện thoại</label>
                <input notnull sodt oninput="Onvaluechange()" type="number" name="Số điện thoại" id="phonenumber">
                <!--thông báo lỗi-->
                <label id="thongbaoLoi" for="phonenumber" class="error"></label>
    
                <label for="email">Email</label>
                <input notnull email oninput="Onvaluechange()" type="email" name="Email" id="email">
                <!--thông báo lỗi-->
                <label id="thongbaoLoi" for="email" class="error"></label>
    
                <label for="diachi">Địa chỉ nhận hàng</label>
                <input notnull oninput="Onvaluechange()" type="diachi" name="Địa chỉ" id="diachi">
                <!--thông báo lỗi-->
                <label id="thongbaoLoi" for="diachi" class="error"></label>  
    
                <label class="chuyen" for="hinhthuc">Cách thức thanh toán</label>
                <input notnull oninput="Onvaluechange()" class="chuyen" type="diachi" name="Hình thức thanh toán" id="diachi">
                <!--thông báo lỗi-->
                <label id="thongbaoLoi" for="hinhthuc" class="error chuyen"></label>
                
                <button class="thanhtoanbtn" onclick="xacNhanThanhToan()">Xác nhận Thanh toán</button>
            </div>
            <div class="phanbenphai">
                <h2 class="cart-title">CHI TIẾT THANH TOÁN</h2>
                <div class="phantrentt">
                    <div class="hinhthuctt">
                        <p class="tenhthuc">HÌNH THỨC VẬN CHUYỂN</p>
                        <div class="noidungnay">
                            <p class="item-tenhthuc"><i class="fas fa-caret-right"></i>Giao hàng tiết kiệm(5-7 ngày)</p>                                        
                            <p class="item-tenhthuc2">Giao hàng nhanh(3-5 ngày)</p>            
                            <p class="item-tenhthuc2">Giao hàng đảm bảo(7 ngày)</p>          
                            <p class="item-tenhthuc2"><i class="fas fa-sort-down"></i> Xem thêm <i class="fas fa-sort-down"></i></p> 
                        </div>                            
                    </div>
                    <div class="ngangiuan"></div>
                    <div class="dvivanchuyen">
                        <p class="tenhthuc">ĐƠN VỊ VẬN CHUYỂN</p>  
                        <div class="noidung2nay">
                            <p class="item-tenhthuc"><i class="fas fa-caret-right"></i>ShopSale 4.0</p>                                        
                            <p class="item-tenhthuc2">ShopSale Express</p>            
                            <p class="item-tenhthuc2">NowShip</p>                    
                            <p class="item-tenhthuc2">NinjaShip</p>                          
                            <p class="item-tenhthuc2"><i class="fas fa-sort-down"></i> Xem thêm <i class="fas fa-sort-down"></i></p>       
                        </div>                                     
                    </div>
                </div>
                <div class="ngancuoi"></div>
                <div class="chinhsachvc">
                    <p class="chinhsachvc">Hàng không thể giao tận tay người nhận sẽ hoàn trả lại cho ShopSale.</p>
                </div>
                <div class="ngancuoi"></div>
            </div>           
        </div>        
    </main>
    <footer id="footer">
        <div class="footer_noiDung">
            <div class="footer_noiDung_nd1">
                <div class="footer_noiDung_header">
                    <h3>CHĂM SÓC KHÁCH HÀNG</h3>
                </div>
                <div class="chamsoc_noidung">
                    <li class="ndcskh">Trung tâm trợ giúp</li>
                    <li class="ndcskh">ShopSale Mail</li>
                    <li class="ndcskh">ShopSale Blog</li>
                    <li class="ndcskh">Hướng dẫn mua hàng</li>
                    <li class="ndcskh">Vận chuyển</li>
                    <li class="ndcskh">Trả hàng & Hoàn tiền</li>
                    <li class="ndcskh">ShopSale xu</li>
                    <li class="ndcskh">Chính sách bảo hành</li>
                    <li class="ndcskh">Chăm sóc khách hàng</li>
                </div>
            </div>
            <div class="footer_noiDung_nd2">
                <div class="footer_noiDung_header">
                    <h3>VỀ SHOPSALE</h3>
                </div>
                <div class="shopsale_noidung">
                    <li class="ndcskh">Giới thiệu về ShopSale</li>
                    <li class="ndcskh">Tuyển dụng</li>
                    <li class="ndcskh">Điều khoản ShopSale</li>
                    <li class="ndcskh">Chính sách bảo mật</li>
                    <li class="ndcskh">Flash Sales</li>
                    <li class="ndcskh">Chương trình tiếp thị</li>
                </div>
            </div>
            <div class="footer_noiDung_nd3">
                <div class="footer_noiDung_nd3a">
                    <div class="footer_noiDung_header">
                        <h3>NGÂN HÀNG LIÊN KẾT</h3>
                    </div>
                    <div class="cacnganhang"> 
                        <div class="cacnganhg">
                            <img src="images/bidvtt.png" alt="">
                        </div>
                        <div class="cacnganhg">
                            <img src="images/tpank.png" alt="">
                        </div>
                        <div class="cacnganhg">
                            <img src="images/sacombank.png" alt="">
                        </div>
                        <div class="cacnganhg">
                            <img src="images/vietcombanktt.png" alt="">
                        </div>
                        <div class="cacnganhg">
                            <img src="images/sacombank.png" alt=""> 
                        </div>    
                    </div>
                                       
                </div>
                <div class="footer_noiDung_nd3b">
                    <div class="footer_noiDung_header">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQJcQh7g-xkXE8lZ699qf2EykoZ_xPTAkwZmu-0dWtlM8hhfhgi&usqp=CAU" alt="">
                    </div>
                </div>                
            </div>
            <div class="footer_noiDung_nd4">
                <div class="footer_noiDung_header">
                    <h3>THEO DÕI CHÚNG TÔI TRÊN</h3>
                </div>
                <div class="theodoi_noidung">
                    <li class="ndcskh"><i class="fab fa-facebook"></i> Facebook</li>
                    <li class="ndcskh"><i class="fab fa-instagram-square"></i> Instagram</li>
                </div>
            </div>
            <div class="footer_noiDung_nd5">
                <div class="footer_noiDung_header">
                    <h3>TẢI ỨNG DỤNG SHOPSALE NGAY THÔI</h3>
                </div>
                <div class="qrtai">
                    <img src="images/f184c0b68a2d385feb5d70a76396230b.png" alt="">
                </div>
                <div class="lienketcungqr">
                    <a href="#" class="qr_ap_link"><img src="images/2679f513b5f9e235adf2c6c288617e7b.png" alt="Google Play"></a>
                    <a href="#" class="qr_ap_link"><img src="images/759416b55e2bd69ecc360ee2faab7ad0.png" alt="App Store"></a>
                </div>
            </div>
        </div>
        <div class="noidung2">
            Quốc gia & Khu vực: <span class="nuoc"> Việt Nam </span> | <span class="nuoc">Lào </span> | <span class="nuoc"> Thái Lan </span> | 
            <span class="nuoc"> Trung Quốc </span> | <span class="nuoc"> Indonesia </span>|<span class="nuoc"> ...</span>
        </div>
        <div class="diachishop">
            <p>Công ty Trách nhiện hữu hạn Một thành viên ShopSale</p>
            <p>Địa chỉ:  Thành phố Buôn Ma Thuột - tỉnh Đăk Lăk</p>
            <p>Bản quyền của Công ty TNHHMTV ShopSale</p>
        </div>
    </footer>


        
    <!--Khung đăng nhập và đăng kí-->
    <div id="dangKy" class="hienThiDkDn">
        <div class="hienThiDkDn__body">
            <!--Nội dung trong đăg kí-->
            <div class="khung_inner">
                <div class="khunginner__noidung">
                    <div class="khung_inner_tren">
                        <h3 class="heading_inner">Đăng ký</h3>
                        <span id="chuyenDn" class="chuyenDn"  onclick="nodeDangNhap()" >Đăng nhập</span>
                    </div>
                    <div class="khunginner_phan2">
                        <div class="nhominput">
                            <input type="text"class="khunginner__input" placeholder="Số điện thoại/Email/Tên Đăng ký">
                        </div>
                        <div class="nhominput">
                            <input type="password"class="khunginner__input" placeholder="Mật khẩu của bạn">
                        </div>
                        <div class="nhominput">
                            <input type="password"class="khunginner__input" placeholder="Nhập lại mật khẩu">
                        </div>
                    </div>
                    <div class="khunginner_phan3">
                        <p class="chuChinhSachText">
                            Bằng việc đăng kí, bạn đã đồng ý với ShopSale về
                            <a href="" class="LinkDieuKhoan">Điều khoản dịch vụ</a> &
                            <a href="" class="LinkDieuKhoan">Chính sách bảo mật</a>
                        </p>
                    </div>
                    <div class="nutDieuKhien">
                        <button onclick="anDangKy()" class="bttrtn">TRỞ LẠI</button>
                        <button class="btn-chinh">ĐĂNG KÝ</button>
                    </div>
                </div>
                <div class="khungMxh">
                    <img class="mxhKhung" src="images/facebook.png" alt="">
                    <img class="mxhKhung" src="images/google.png" alt="">
                </div>
            </div>
        </div> 
    </div>   
    <div id="dangNhap" class="hienThiDkDnh">
        <div class="hienThiDkDn__body">
            <!--Nội dung trong đăg nhập-->
            <div class="khung_inner">
                <div class="khunginner__noidung">
                    <div class="khung_inner_tren">
                        <h3 class="heading_inner">Đăng nhập</h3>
                        <span class="chuyenDn" onclick="nodeDangKy()">Đăng ký</span>
                    </div>
                    <div class="khunginner_phan2">
                        <div class="nhominput">
                            <input type="text"class="khunginner__input" placeholder="Số điện thoại/Email/Tên Đăng ký">
                        </div>
                        <div class="nhominput">
                            <input type="password"class="khunginner__input" placeholder="Mật khẩu của bạn">
                        </div>
                    </div>
                    <div class="khunginner_phan3">
                        <div class="quenMk">
                            <a href="" class="quenMkLink">Quên mật khẩu</a>
                            <a href="" class="quenMkLink2">Cần trợ giúp?</a>
                        </div>
                        
                    </div>
                    <div class="nutDieuKhien">
                        <button onclick="anDangNhap()" class="bttrtn">TRỞ LẠI</button>
                        <button class="btn-chinh">ĐĂNG NHẬP</button>
                    </div>
                </div>
                <div class="khungMxh">
                    <img class="mxhKhung" src="images/facebook.png" alt="">
                    <img class="mxhKhung" src="images/google.png" alt="">
                </div>
            </div>
        </div>
    </div> 



    <script>
        
        hienThiDanhSachItemGioHang();
        function xacNhanThanhToan(){
            var nodeCha = event.target.parentElement;
            if(!ktraHopLe(nodeCha)){
                return 
                
            }
            alert('Thanh toán thành công!') ;     
            
        }
        function hienThiDanhSachItemGioHang(){
            var danhSachItemGioHang = layGioHangTuLCS();
            if(danhSachItemGioHang == ''|| danhSachItemGioHang == null){
                var HTML = inRaKhiGioHangTrong();
            }else{
                var HTML = chuyenDanhSachItemGioHangSangHTML(danhSachItemGioHang);                
            }
            var nodeGioHang = document.getElementById('gioHang');
            nodeGioHang.innerHTML =  HTML;
        }
        function chuyenDanhSachItemGioHangSangHTML(danhSachItemGioHang){
            var htmlTong = '';
            for(var i = 0; i < danhSachItemGioHang.length; i++){
                htmlTong = htmlTong + chuyenDoiTuongItemGioHangSangHTML(danhSachItemGioHang[i]);
            }
            return htmlTong;
        }
        function chuyenDoiTuongItemGioHangSangHTML(itemGioHang){
            var sanPham = laySanPhamTheoId(itemGioHang.idSanPham);
            var tongTien = ((sanPham.tinhGiaBan())*itemGioHang.soLuong);
            var html =  '   <div id="itemhang" class="item-giohang">  '  + 
                '                <div class="hinhanh">  '  + 
                '                    <img src="'+ sanPham.hinhAnh +'" alt="">  '  + 
                '                </div>  '  + 
                '                <p class="tensp">'+ sanPham.ten +'</p>  '  + 
                '                <div class="gia">  '  + 
                '                    <span class="giaGoc">'+ themChamVaoSo(sanPham.giaGoc) +' đ</span>  '  + 
                '                    <span class="giaBan">'+ themChamVaoSo(sanPham.tinhGiaBan()) +' đ</span>  '  + 
                '                </div>  '  + 
                '                <input type="number" oninput="tinhThanhTien('+itemGioHang.idSanPham+')" class="soLuong" value="'+ itemGioHang.soLuong +'">  '  + 
                '                <p class="tongTien">'+ themChamVaoSo(tongTien) +'đ</p>  '  + 
                '                <div class="hanhDong">  '  + 
                '                    <i class="fas fa-trash" onclick="onClickNutXoa('+"\'"+itemGioHang.idSanPham+"\'"+')"></i>  '  + 
                '                </div>  '  + 
                '           </div>  ' ; 
            return html;   
        }

        function inRaKhiGioHangTrong() {
            var HTML = '';
            HTML += '<div class="khunghinhtrong">';
            HTML += '   <img class="hinhtrong" src="https://cdn.dribbble.com/users/204955/screenshots/4930541/emptycart.png">';
            HTML += '   <h3 class="noidungtrong1">GIỎ HÀNG TRỐNG</h3>';
            HTML += '   <h3 class="noidungtrong">Vui lòng chọn thêm sản phẩm!</h3>';
            HTML += '</div>';
            return HTML;
        }
        //Xoá sp
        function xoaSanPham(){
            var child = document.getElementById('itemhang');
            child.parentNode.removeChild(child);  
        }
        function onClickNutXoa(id) {
            // Xóa node hiển thị
            let nodeSanPham = event.target.parentElement;
            nodeSanPham.parentElement.remove();
            // Xóa data
            let dataGioHang = layGioHangTuLCS("gioHang");
            let vitri = dataGioHang.findIndex(sp => sp.idSanPham == id);
            dataGioHang.splice(vitri, 1);
            luuDanhSachItemGioHangVaoLCS(dataGioHang, "gioHang");
            //tính tổng tiền
            // Tính lại tổng tiền
            // let nodeTongTien = document.getElementById("tongTien");
            // nodeTongTien.innerHTML = themChamVaoSo(tinhThanhTien()) + " đ";            
        }
        // function tinhThanhTien(dataGioHang){
        //     let dataSanPham = layGioHangTuLCS('danhSachSanPham');
        //     let tongTien = 0;
        //     for(var i=0; i < dataGioHang.length-1; i++){
        //         let idSanPham = dataGioHang[i].id;
        //         let soLuong = dataGioHang[i].soLuong;
        //         let sanPham = dataSanPham.find(sp => sp.id == idSanPham);
        //         let giaBan = tinhGiaBan();
        //         tongTien += giaBan;
        //     }
        //     return tongTien;
        //     console.log(tongTien);

        // }
    </script>
</body>
</html>